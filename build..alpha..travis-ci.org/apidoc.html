<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/Nickersoft/push.js"

    >push.js (v0.0.13)</a>
</h1>
<h4>A compact, cross-browser solution for the Javascript Notifications API</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.push.js">module push.js</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">push.js.</span>isSupported</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.__lastWorkerPath">
            function <span class="apidocSignatureSpan">push.js.</span>__lastWorkerPath
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.clear">
            function <span class="apidocSignatureSpan">push.js.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.close">
            function <span class="apidocSignatureSpan">push.js.</span>close
            <span class="apidocSignatureSpan">(tag)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.count">
            function <span class="apidocSignatureSpan">push.js.</span>count
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.create">
            function <span class="apidocSignatureSpan">push.js.</span>create
            <span class="apidocSignatureSpan">(title, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">push.js.</span>Permission</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">push.js.</span>js.Permission</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.push.js.Permission">module push.js.Permission</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.Permission.get">
            function <span class="apidocSignatureSpan">push.js.Permission.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.Permission.has">
            function <span class="apidocSignatureSpan">push.js.Permission.</span>has
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.push.js.Permission.request">
            function <span class="apidocSignatureSpan">push.js.Permission.</span>request
            <span class="apidocSignatureSpan">(onGranted, onDenied)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">push.js.Permission.</span>DEFAULT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">push.js.Permission.</span>DENIED</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">push.js.Permission.</span>GRANTED</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.push.js" id="apidoc.module.push.js">module push.js</a></h1>




    <h2>
        <a href="#apidoc.element.push.js.__lastWorkerPath" id="apidoc.element.push.js.__lastWorkerPath">
        function <span class="apidocSignatureSpan">push.js.</span>__lastWorkerPath
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__lastWorkerPath = function () {
    return self.lastWorkerPath;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    promise.then(function(wrapper) {
        var notification = wrapper.get();
        expect(notification.title).toBe(TEST_TITLE);
        expect(notification.body).toBe(TEST_BODY);
        expect(notification.icon).toBe(TEST_ICON);
        expect(notification.tag).toBe(TEST_TAG);
        expect(notification.silent).toBe(undefined);
        expect(Push.<span class="apidocCodeKeywordSpan">__lastWorkerPath</span>()).toBe(TEST_SW);
        done();
    });
});

it(&#x27;should use &#x22;serviceWorker.js&#x22; as a service worker path if one is not specified&#x27;, function(done) {
    var promise = Push.create(TEST_TITLE);
    promise.then(function(wrapper) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.clear" id="apidoc.element.push.js.clear">
        function <span class="apidocSignatureSpan">push.js.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
    var success = true;

    for (key in notifications)
        success = success &#x26;&#x26; closeNotification(key);

    return success;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    jasmine.clock().install();
    spyOn(window.Notification, &#x27;requestPermission&#x27;).and.callFake(function (cb) {
        cb(Push.Permission.GRANTED);
    });
});

beforeEach(function () {
    Push.<span class="apidocCodeKeywordSpan">clear</span>();
});

it(&#x27;should throw exception if no title is provided&#x27;, function () {
    expect(function() {
        Push.create();
    }).toThrow();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.close" id="apidoc.element.push.js.close">
        function <span class="apidocSignatureSpan">push.js.</span>close
        <span class="apidocSignatureSpan">(tag)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (tag) {
    var key;
    for (key in notifications) {
        notification = notifications[key];
<span class="apidocCodeCommentSpan">        /* Run only if the tags match */
</span>        if (notification.tag === tag) {
            /* Call the notification&#x27;s close() method */
            return closeNotification(key);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        closeNotification = function (id) {
var errored = false,
    notification = notifications[id];

if (typeof notification !== &#x27;undefined&#x27;) {
    /* Safari 6+, Chrome 23+ */
    if (notification.close) {
        notification.<span class="apidocCodeKeywordSpan">close</span>();
    /* Legacy webkit browsers */
    } else if (notification.cancel) {
        notification.cancel();
    /* IE9+ */
    } else if (w.external &#x26;&#x26; w.external.msIsSiteMode) {
        w.external.msSiteModeClearIconOverlay();
    } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.count" id="apidoc.element.push.js.count">
        function <span class="apidocSignatureSpan">push.js.</span>count
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">count = function () {
    var count = 0,
        key;

    for (key in notifications)
        count++;

    return count;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            expect(Push.__lastWorkerPath()).toBe(TEST_SW_DEFAULT);
            done();
        });
    });

    it(&#x27;should return the increase the notification count&#x27;, function () {
        var count;
        expect(Push.<span class="apidocCodeKeywordSpan">count</span>()).toBe(0);
        Push.create(TEST_TITLE);
        expect(Push.count()).toBe(1);
    });

});

describe(&#x27;event listeners&#x27;, function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.create" id="apidoc.element.push.js.create">
        function <span class="apidocSignatureSpan">push.js.</span>create
        <span class="apidocSignatureSpan">(title, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (title, options) {
    var promiseCallback;

<span class="apidocCodeCommentSpan">    /* Fail if the browser is not supported */
</span>    if (!self.isSupported) {
        throw new Error(incompatibilityErrorMessage);
    }

    /* Fail if no or an invalid title is provided */
    if (!isString(title)) {
        throw new Error(&#x27;PushError: Title of notification must be a string&#x27;);
    }

    /* Request permission if it isn&#x27;t granted */
    if (!self.Permission.has()) {
        promiseCallback = function(resolve, reject) {
            self.Permission.request(function() {
                try {
                    createCallback(title, options, resolve);
                } catch (e) {
                    reject(e);
                }
            }, function() {
                reject(&#x22;Permission request declined&#x22;);
            });
        };
    } else {
        promiseCallback = function(resolve, reject) {
            try {
                createCallback(title, options, resolve);
            } catch (e) {
                reject(e);
            }
        };
    }

    return new Promise(promiseCallback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

it(&#x27;should request permission if permission is not granted&#x27;, function () {
    spyOn(window.Notification, &#x27;requestPermission&#x27;).and.callFake(function (cb) {
        cb(Push.Permission.DENIED);
    });
    Push.Permission.request();
    Push.<span class="apidocCodeKeywordSpan">create</span>(TEST_TITLE);
    expect(window.Notification.requestPermission).toHaveBeenCalled();
});

it(&#x27;should update permission value if permission is granted and execute callback&#x27;, function (done) {
    spyOn(Push.Permission, &#x27;get&#x27;).and.returnValue(Push.Permission.GRANTED);
    spyOn(window.Notification, &#x27;requestPermission&#x27;).and.callFake(function (cb) {
        cb(Push.Permission.GRANTED);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.push.js.Permission" id="apidoc.module.push.js.Permission">module push.js.Permission</a></h1>


    <h2>
        <a href="#apidoc.element.push.js.Permission.get" id="apidoc.element.push.js.Permission.get">
        function <span class="apidocSignatureSpan">push.js.Permission.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {

    var permission;

<span class="apidocCodeCommentSpan">    /* Return if Push not supported */
</span>    if (!self.isSupported) { throw new Error(incompatibilityErrorMessage); }

    /* Safari 6+, Chrome 23+ */
    if (w.Notification &#x26;&#x26; w.Notification.permissionLevel) {
        permission = w.Notification.permissionLevel;

    /* Legacy webkit browsers */
    } else if (w.webkitNotifications &#x26;&#x26; w.webkitNotifications.checkPermission) {
        permission = Permissions[w.webkitNotifications.checkPermission()];

    /* Firefox 23+ */
    } else if (w.Notification &#x26;&#x26; w.Notification.permission) {
        permission = w.Notification.permission;

    /* Firefox Mobile */
    } else if (navigator.mozNotification) {
        permission = Permission.GRANTED;

    /* IE9+ */
    } else if (w.external &#x26;&#x26; w.external.msIsSiteMode() !== undefined) {
        permission = w.external.msIsSiteMode() ? Permission.GRANTED : Permission.DEFAULT;
    } else {
        throw new Error(incompatibilityErrorMessage);
    }

    return permission;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        /**
         * Requests permission for desktop notifications
         * @param {Function} callback - Function to execute once permission is granted
         * @return {void}
         */
        self.Permission.request = function (onGranted, onDenied) {
var existing = self.Permission.<span class="apidocCodeKeywordSpan">get</span>();

/* Return if Push not supported */
if (!self.isSupported) {
    throw new Error(incompatibilityErrorMessage);
}

/* Default callback */
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.Permission.has" id="apidoc.element.push.js.Permission.has">
        function <span class="apidocSignatureSpan">push.js.Permission.</span>has
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">has = function () {
    return Permission.get() === Permission.GRANTED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/* Fail if no or an invalid title is provided */
if (!isString(title)) {
    throw new Error(&#x27;PushError: Title of notification must be a string&#x27;);
}

/* Request permission if it isn&#x27;t granted */
if (!self.Permission.<span class="apidocCodeKeywordSpan">has</span>()) {
    promiseCallback = function(resolve, reject) {
        self.Permission.request(function() {
            try {
                createCallback(title, options, resolve);
            } catch (e) {
                reject(e);
            }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.push.js.Permission.request" id="apidoc.element.push.js.Permission.request">
        function <span class="apidocSignatureSpan">push.js.Permission.</span>request
        <span class="apidocSignatureSpan">(onGranted, onDenied)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">request = function (onGranted, onDenied) {
    var existing = self.Permission.get();

<span class="apidocCodeCommentSpan">    /* Return if Push not supported */
</span>    if (!self.isSupported) {
        throw new Error(incompatibilityErrorMessage);
    }

    /* Default callback */
    callback = function (result) {
        switch (result) {

            case self.Permission.GRANTED:
                if (onGranted) onGranted();
                break;

            case self.Permission.DENIED:
                if (onDenied) onDenied();
                break;

        }

    };

    /* Permissions already set */
    if (existing !== self.Permission.DEFAULT) {
        callback(existing);
    }
    /* Safari 6+, Chrome 23+ */
    else if (w.Notification &#x26;&#x26; w.Notification.requestPermission) {
        Notification.requestPermission(callback);
    }
    /* Legacy webkit browsers */
    else if (w.webkitNotifications &#x26;&#x26; w.webkitNotifications.checkPermission) {
        w.webkitNotifications.requestPermission(callback);
    } else {
        throw new Error(incompatibilityErrorMessage);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (!isString(title)) {
    throw new Error(&#x27;PushError: Title of notification must be a string&#x27;);
}

/* Request permission if it isn&#x27;t granted */
if (!self.Permission.has()) {
    promiseCallback = function(resolve, reject) {
        self.Permission.<span class="apidocCodeKeywordSpan">request</span>(function() {
            try {
                createCallback(title, options, resolve);
            } catch (e) {
                reject(e);
            }
        }, function() {
            reject(&#x22;Permission request declined&#x22;);
...</pre></li>
    </ul>








</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
